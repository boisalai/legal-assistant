# docker-compose.agno-example.yml
# Configuration exacte des exemples Agno officiels

version: '3.8'

services:
  # ==============================================
  # SurrealDB - Comme dans les exemples Agno
  # ==============================================
  # Basé sur: https://github.com/agno-agi/agno/blob/main/cookbook/db/surrealdb/surrealdb_for_agent.py
  #
  # Commande originale:
  # docker run --rm --pull always -p 8000:8000 surrealdb/surrealdb:latest start --user root --pass root
  surrealdb:
    image: surrealdb/surrealdb:latest
    container_name: notary-surrealdb
    restart: unless-stopped

    environment:
      TZ: America/Montreal

    ports:
      - "8000:8000"  # Port 8000 comme dans l'exemple Agno (pas 8001!)

    # Commande EXACTE de l'exemple Agno
    # Pas de file:/data/notary.db - stockage en mémoire par défaut
    command: >
      start
      --user root
      --pass root

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 10s
      timeout: 5s
      retries: 5

networks:
  default:
    name: notary_network
